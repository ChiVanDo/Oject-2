<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="dieuhuong.css">
    <link rel="stylesheet" href="chi_tiet_sp.css">
    <script src="them_sp.js"></script>
    <script src="https://kit.fontawesome.com/9d63442f20.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>


<body>
<div id="div_body_lv1">
  <div class="div_body_lv2">
    <div class="header_top_nguoi_ban"  >
      <h3>Kênh Người Bán</h3>
    </div>
    <div>
      <div class="dieu_huong">
        <ul>
          <li><a href="index.html">HOME</a></li>
          <li><a href="them_sp_ng_ban.html">THÊM SẢN PHẨM</a></li>
          <li><a href="don_hang.html">ĐƠN HÀNG</a></li>
      </ul>
      </div>
      <!--quang cáo-->

      <!--PHẦN CHỨA SẢN PHẨM-->
      <section id="san_pham_lv1">
        <div class="nhieu_sp">
          <!--Noi dung duoc lay tu localStorage-->
        </div>
      </section>
    </div>
  </div>
</div>

<div style="background-color: rgb(167, 162, 162);">
  <div id = "div_body_lv1" style="margin: auto; display: flex;" >
    <div class="ttct_sp_lv4" style=" width: 80%; margin: auto;">
      <p>CHEESE @facebook/ChiVanDo</p>
    </div>
  </div>
</div>

<script>

  // bước 1 lấy danh sách từ local
  // đoạn này là mới down đoạn json từ local về
  var jsdssp = localStorage.getItem('danhsachsp'); 
  var dssp1 = JSON.parse(jsdssp);
  
  //bước 2 chuyển danh sách đối tượng sp sang đoạn html
  var HTML = chuyenDanhsachdoituongsanphamthanhHTML(dssp1);
  //bước 3 gán đoạn html vào web
  var nodeSp = document.getElementById('san_pham_lv1');
  nodeSp.innerHTML = HTML;

  // chức năng trả ra id sp được click vào
  // them 1 sp vao dssp cua gio hang trong local stoget
  function them_vao_gio_hang(idsp, size , hinhanh, ten, giaban , sl){
    alert('Đã Thêm Sản Phẩm Thành Công');
    var ds_sp_giohang = laydsspgiohang();
    var flag_check_sp = false;

    for(var i = 0 ; i < ds_sp_giohang.length; i++){
      if(ds_sp_giohang[i] != null && ds_sp_giohang[i].idsp == idsp && ds_sp_giohang[i].size == size){
        ds_sp_giohang[i].soluong += sl ;
        flag_check_sp = true;
      }
    }
    if(flag_check_sp == false){
      var item = taosanphamtronggiohang(idsp, hinhanh, ten, giaban);
      ds_sp_giohang.push(item);
    }
    // b5 luu nguoc lai local
    luudsvaolocal(ds_sp_giohang);
  }
</script>
</body>
</html>